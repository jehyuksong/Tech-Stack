**이 글은 '그런 REST API로 괜찮은가' 라는 강연을 보면서 정리한 글입니다.**

-   [https://www.youtube.com/watch?v=RP\_f5dMoHFc](https://www.youtube.com/watch?v=RP_f5dMoHFc)

# REST(REpresentational State Transfer)

-   분산 하이퍼미디어 시스템(예: 웹)을 위한 아키텍쳐 스타일

### 아키텍쳐 스타일

-   제약조건의 집합

### REST를 구성하는 스타일

-   client-server
    
-   stateless
    
-   cache
    
-   **uniform interface :** 이 부분이 잘 지켜지지 않는다.
    
    ⇒ self-descriptive messages : 메시지가 스스로를 설명할 수 있어야 한다.
    
    ⇒ HATEOAS : 애플리케이션의 상태가 하이퍼링크를 이용해 전이되어야한다.
    

**왜 uniform interface가 필요한가?**

-   서버의 기능이 변경되어도 클라이언트를 업데이트할 필요가 없는 독립적인 진화를 위해서이다.
    
-   서버의 api가 바뀌고 URI가 바뀌고 해도 클라이언트를 수정할 필요가 없는 것이다.
    
-   REST를 만들게 된 계기가 웹을 망가뜨리지 않으면서 향상시키기 위함이었다.
    
-   layered system
    
-   code-on-demand(potional) ⇒ 서버에서 코드를 클라이언트로 보내서 실행할 수 있어야 한다는 것, 자바스크립트
    

### 웹

-   웹 페이지를 변경했다고 웹 브라우저를 업데이트할 필요는 없다.
-   웹 브라우저를 업데이트했다고 웹페이지를 변경할 필요도 없다.
-   HTTP 명세가 변경되어도 웹은 잘 동작한다.
-   HTML 명세가 변경되어도 웹은 잘 동작한다.
-   예전 브라우저에서 UI가 살짝 깨질 지라도 동작은 한다.
-   **앱은 업데이트를 자주 하는 반면 웹에서는 업데이트를 하는 일이 거의 없다. 이는 앱은 REST 형식을 따르지 않고 있다고 말할 수 있다.**
-   하위 호환성, 상호운용성을 유지하고 지원하기 위해서 엄청난 노력을 하고 있기 때문이다.
-   이런 노력이 없다면 웹도 `구글 몇 버전은 지원하지 않습니다.` 등의 문구를 보게 될 것이다.

# REST API

-   REST 아키텍쳐 스타일을 따르는 API
-   오늘날 대부분의 REST API는 REST 아키텍쳐 스타일을 따르지 않고 있다.
-   시스템 전체를 통제할 수 있는 상황이거나(시스템 전체를 혼자 개발하는 등) 업데이트를 자주 한다고 불평하는 소수의 사람들을 모두 챙기고 싶은 게 아니라면 REST에 대해서 생각하지 않아도 된다.
-   하지만 굉장히 오랜 시간에 걸쳐 시스템을 진화해나가고 싶다면 REST 아키텍쳐 스타일로 구축하는 것이 좋다.

### API에서 REST 형식을 따르기 어려운 이유?

-   프로토콜 : `웹 = HTTP` `HTTP API = HTTP`
-   커뮤니케이션 : `웹 = 사람과 기계` `HTTP API = 기계와 기계`
-   미디어 타입 : `웹 = HTML` `HTTP API= JSON`

로 이루어져있다. **문제의 원인은 JSON**이다.

-   `HTML`은 하이퍼링크가 되고 자기 스스로를 설명할 수 있지만, `JSON`은 하이퍼링크가 정의되어있지 않고, 자기 스스로를 설명하는 것이 불완전하다. 소스만 보고 HTML은 온전한 해석이 되지만 JSON은 그렇지 않다.
-   문법 해석은 가능하지만, 의미를 해석하려면 별도로 문서(API 문서 등) 필요하다.

### 클라이언트와 서버가 독립적 진화를 할 수 있게 영향을 주는 이유

### 1\. self-descriptive

-   확장 가능한 커뮤니케이션을 가능하게 해준다. 서버나 클라이언트가 변경되더라도 오고가는 메시지는 언제나 해석이 가능하기 때문이다.

### 2\. HATEOAS

-   애플리케이션 상태 전이의 late binding
-   어떤 링크를 따라서 어떤 페이지를 가고 그 곳에 간 이후에서야 갈 수 있는 다른 링크들이 확정이 된다. 그렇기 때문에 링크는 동적으로 변경될 수 있다.

### JSON 에서 REST 형식을 따르려면

-   따로 링크나 설명을 위한 명세를 하거나 다양한 방법으로 변경해야 한다. 의도한 독자가 이해할 수만 있으면 된다.

### 결론

-   REST를 따를 것인지는 API를 설계하는 이들이 스스로 판단하여 결정해야한다.
-   REST를 따르겠다면 **Self-descriptive**와 **HATEOAS**를 만족시켜야 한다.
-   **Self-descriptive**는 `custom media type` 이나 `profile link relation` 등으로 만족시킬 수 있다.
-   **HATEOAS**는 `HTTP 헤더`나 `본문에 링크`를 담아 만족시킬 수 있다.
-   REST를 따르지 않겠다면, 이를 HTTP API로 부르거나 지금처럼 그냥 REST API로 부를 수도 있다.  
    ~(REST API로 부른다면 REST를 만든 roy가 싫어하겠지만..)~

---

### 영상과는 별도로 정리

### RESTful API 만들기

### 1\. **GET,POST,PUT,PATCH,DELETE** 의 HTTP Request Verbs를 사용한다.

-   **GET** = 데이터를 요청하고 요청에 응답한다. 읽기와 관련. 데이터베이스에 있는 것을 가져올 수도 있다.
-   **POST** = 데이터 생성과 관련, 데이터베이스에 입력을 한다면 성공하거나 에러가 나거나 하는 등의 응답이 온다.
-   **PUT, PATCH** = 업데이트와 관련. **PUT**은 교체할 전체 항목을 보내 데이터베이스를 업데이트하고, **PATCH** 는 교체할 항목만 보내서 업데이트 하는 것이다.
-   **DELETE** = 삭제와 관련된 것이다. 특정 데이터를 삭제한다.

### 2\. 경로와 엔드 포인트의 특정 패턴을 사용한다.

-   특정 리소스에 액세스하기 위해서 특정 경로 또는 URL을 지정해야 한다.
-   라우팅에 개별 리소스에 대한 엔드포인트를 특정한다. 예를 들어 /aritcles 라는 경로가 아닌 그 안에서 /articles/sports/soccer/ronaldo 와 같이 엔드포인트를 설정할 수 있다. 이렇게 할 때 특정 경로에 대해 put,patch,delete등이 좀 더 명확해진다.
