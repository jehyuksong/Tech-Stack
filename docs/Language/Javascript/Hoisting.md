# 호이스팅(Hoisting)

- 자바스크립트는 실행될 때 ES6의 let,const를 포함한 모든 선언(var, let, const, function, class)을 호이스팅합니다.
- **호이스팅**이란 **유효범위의 최상단**으로 끌어올리는 것을 의미합니다.
- 실제로 끌어올려지는 것은 아니며 내부적으로 처리되고, 메모리에서는 변화가 없습니다.

```jsx
console.log(name);         // undefined
var name = "jehyuk";
```

- `name` 을 `console.log` 보다 뒤에 입력했음에도 에러가 아닌 undefined가 출력됩니다.
- 왜냐하면 실행될 때 호이스팅으로 인해 var 변수가 가장 위로 이동해서 선언되었기 때문입니다.
이를 이해하기 위해서는 변수 선언의 3단계를 이해해야합니다.

---

### 변수 선언 3단계

1. **선언**
- 변수를 말그대로 선언만 해서 변수 객체에 등록합니다.
2. **초기화**
- 변수 객체에 대한 메모리를 할당하고, 변수는 undefined로 초기화됩니다.
3. **할당**
- 초기화된 변수에 값을 할당합니다.

---

```jsx
console.log(name);         // undefined
var name = "jehyuk";

// 아래와 같다.

var name;
console.log(name);
name = "jehyuk";
```

- `var`는  변수를 선언할 때 **선언**과 **초기화**가 **동시**에 일어나기 때문에 `undefined`로 출력이 됩니다.

---

### let, const

```jsx
console.log(name);      // ReferenceError: name is not defined
let name = 'jehyuk';
```

- `let`으로 변수를 선언하니 에러가 발생했습니다. 하지만 중요한 점은 `let` 키워드도 **호이스팅이 되었다**는 점입니다.
- `var`, `let`, `const` 로 선언된 변수들은 모두 **호이스팅**됩니다.
- 다만 `let`은 **선언**과 **초기화**가 **따로** 일어납니다. 그렇기 때문에 초기화 이전에 변수에 접근하다보니 `ReferenceError`가 발생한 것입니다.

---

```jsx
const name = 'jehyuk';  // 선언과 초기화가 동시에 일어나서 정상작동
const name;             // 선언만 했기 때문에 에러 발생!
```

- `const` 는 값이 정해지면 변경이 불가능하기 때문에, 선언할 경우 **선언**과 **초기화**를 같이 해줘야 합니다.

---

## 함수 호이스팅

- **함수선언문**으로 정의된 함수는 실행되는 시점에 **함수선언, 초기화, 할당**이 한번에 이루어진다. 그렇기 때문에 **함수 호이스팅이 발생**해서 유효범위 내의 어느곳에서도 호출이 가능하다.
- 하지만 **함수표현식**으로 정의된 함수는 함수 호이스팅이 아닌 **변수 호이스팅**이 발생하기 때문에 유효범위 내에 있더라도 함수 **호이스팅이 발생하지 않아서** 함수표현식으로 작성할 경우에는 사용할 곳보다 위에서 작성하는 것이 필수적이다.
- **물론, 함수선언문이나 함수표현식, 호이스팅의 여부와는 관계없이 사용하기 전에 작성 즉, 항상 위에서 작성하는 것을 습관화하자.**
