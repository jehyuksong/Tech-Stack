### script async 와 defer

- 자바스크립트는 파서 차단 리소스입니다. 이는 브라우저가 HTML을 파싱하다가 `<script>`를 만나면 진행하던 파싱을 중단하고 스크립트 리소스를 다운로드해 파싱하고 실행합니다.

**head 태그에 사용**

```jsx
<head>
  <script src="practice.js">
</head>
```

- 그렇기 때문에 외부 스크립트를 불러올 때 위와 같이 사용하면 자바스크립트 코드가 실행되는 동안 HTML 파싱이 중단되기에 화면이 나오는 속도가 늦어지고 사용자들은 느리다고 인식하게 됩니다.
- 또한, 더욱 중요한 것은 HTML 코드가 나온 뒤 DOM 을 조작하게 되는 스크립트 같은 경우 HTML파싱이 중단되었기 때문에 동작하지 않을 수 있다.

**body 태그 끝나기 전에 사용**

```jsx
  <script src="practice.js">
</body>
```

- 그렇기 때문에 이와 같이 `</body>` 바로 앞에 선언해주는 경우가 많다.
- HTML 파싱을 끝내고 스크립트가 실행되기 때문에 DOM을 조작하는 것에도 문제가 없기 때문에 일반적으로 많이 사용되는 방법이다.

---

위의 방법들 외에도 다른 좋은 방법들이 있다. 우선 짧게 설명을 해두자면,

- parsing HTML : HTML을 읽어서 순서대로 화면에 출력하는 것을 의미한다.
- fetching JS : JS를 실행하는 것이 아닌 쉽게 말해 스크립트를 다운받아오는 것을 의미한다.

1. **async**

```jsx
<script sync src="practice.js"></script>
```

- **parsing HTML**과 **fetching JS**가 같이 진행되다가 JS를 다 가져오면 HTML을 읽던 것을 멈추고 JS를 실행한다. JS 실행이 끝나면 다시 HTML을 parsing한다.
- **HTML을 파싱하는 것과 fetching JS가 동시**에 일어나서 좀 더 빠르지만 HTML을 다 가져오기 전에 JS를 실행할 수 있기 때문에 JS에서 필요로 하는 HTML 구문을 못가져와서 실행에 문제가 생길 수 있다.
- **DOM에 의존하는 경우가 많을 경우 정상적으로 작동하지 않을 수도 있다.**

  2.  **defer🔥**

```jsx
<script src="practice.js" defer></script>
```

- **parsing HTML**과 **fetching JS**가 같이 진행되고, **JS 파일을 다 가져오더라도 실행하지 않고 HTML을 파싱하는 것이 끝날 때까지 기다린 후, JS 파일이 실행된다.**
- **HTML을 파싱하는 것과 fetching JS가 동시**에 일어나서 빠르고 ,HTML 파싱이 끝나지 않았다면 끝날 때까지 기다린 뒤에 JS가 실행되기 때문에 JS가 작동되는 것에 전혀 문제가 없다.
- 그렇기 때문에 **DOM을 다루는 요소가 많은 경우에도 전혀 문제가 없다.**
- 위와 같은 이유로 **defer**이 **가장 추천**되는 외부 스크립트 삽입 방법이라고 한다.
